{"ast":null,"code":"import { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport { MatTable, MatTableDataSource } from '@angular/material/table';\nimport { select } from '@ngrx/store';\nimport { merge, Subject, Subscription } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, tap } from 'rxjs/operators';\nimport { UserLoadAction } from '../state/user.actions';\nimport { selectAllUser, selectUserError, selectUserLoading, selectUserTotal } from '../state/user.selectors';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/material/card\";\nimport * as i3 from \"@angular/material/form-field\";\nimport * as i4 from \"@angular/material/input\";\nimport * as i5 from \"@angular/material/table\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/paginator\";\n\nfunction UserTableComponent_ng_container_18_th_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const columnName_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(columnName_r7);\n  }\n}\n\nfunction UserTableComponent_ng_container_18_td_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r11 = ctx.$implicit;\n    const columnName_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(row_r11[columnName_r7]);\n  }\n}\n\nfunction UserTableComponent_ng_container_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0, 17);\n    i0.ɵɵtemplate(1, UserTableComponent_ng_container_18_th_1_Template, 2, 1, \"th\", 18);\n    i0.ɵɵtemplate(2, UserTableComponent_ng_container_18_td_2_Template, 2, 1, \"td\", 19);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const columnName_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"matColumnDef\", columnName_r7);\n  }\n}\n\nfunction UserTableComponent_td_20_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"span\", 23);\n    i0.ɵɵtext(2, \"No Users\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction UserTableComponent_td_20_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"span\", 24);\n    i0.ɵɵtext(2, \"System Failure\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 23);\n    i0.ɵɵtext(4, \"Error\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\", 25);\n    i0.ɵɵlistener(\"click\", function UserTableComponent_td_20_ng_container_3_Template_span_click_5_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return ctx_r17.retry();\n    });\n    i0.ɵɵtext(6, \"Retry\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction UserTableComponent_td_20_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"span\", 24);\n    i0.ɵɵtext(2, \"Retrieving data...\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction UserTableComponent_td_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 22);\n    i0.ɵɵtemplate(1, UserTableComponent_td_20_ng_container_1_Template, 3, 0, \"ng-container\", 14);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵtemplate(3, UserTableComponent_td_20_ng_container_3_Template, 7, 0, \"ng-container\", 14);\n    i0.ɵɵpipe(4, \"async\");\n    i0.ɵɵtemplate(5, UserTableComponent_td_20_ng_container_5_Template, 3, 0, \"ng-container\", 14);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵattribute(\"colspan\", ctx_r2.displayedColumns.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !i0.ɵɵpipeBind1(2, 4, ctx_r2.error$) && !ctx_r2.loading);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(4, 6, ctx_r2.error$) && !ctx_r2.loading);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.loading);\n  }\n}\n\nfunction UserTableComponent_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 26);\n  }\n}\n\nfunction UserTableComponent_ng_container_22_tr_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 28);\n  }\n}\n\nfunction UserTableComponent_ng_container_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, UserTableComponent_ng_container_22_tr_1_Template, 1, 0, \"tr\", 27);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matRowDefColumns\", ctx_r4.displayedColumns);\n  }\n}\n\nfunction UserTableComponent_ng_container_23_tr_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 30);\n  }\n}\n\nconst _c0 = function () {\n  return [\"noData\"];\n};\n\nfunction UserTableComponent_ng_container_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, UserTableComponent_ng_container_23_tr_1_Template, 1, 0, \"tr\", 29);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matRowDefColumns\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\n\nconst _c1 = function () {\n  return [5, 10, 25, 100];\n};\n\nexport class UserTableComponent {\n  constructor(store) {\n    this.store = store;\n    this.displayedColumns = ['Id', 'FullName', 'Country', 'Role', 'Email'];\n    this.noData = [{}];\n    this.defaultSort = {\n      active: 'role',\n      direction: 'asc'\n    };\n    this.filterSubject = new Subject();\n    this.subscription = new Subscription();\n    this.filter = '';\n  }\n\n  ngOnInit() {\n    this.store.pipe(select(selectAllUser)).subscribe(users => this.initializeData(users));\n    this.store.pipe(select(selectUserTotal)).subscribe(total => this.userTotal = total);\n    this.subscription.add(this.store.pipe(select(selectUserLoading)).subscribe(loading => {\n      if (loading) {\n        this.dataSource = new MatTableDataSource(this.noData);\n      }\n\n      this.loading = loading;\n    }));\n    this.error$ = this.store.pipe(select(selectUserError));\n  }\n\n  ngAfterViewInit() {\n    this.loadUsers();\n    let filter$ = this.filterSubject.pipe(debounceTime(150), distinctUntilChanged(), tap(value => {\n      this.paginator.pageIndex = 0;\n      this.filter = value;\n    })); // let sort$ = this.sort.sortChange.pipe(tap(() => this.paginator.pageIndex = 0));\n\n    this.subscription.add(merge(filter$, this.paginator.page).pipe(tap(() => this.loadUsers())).subscribe());\n  }\n\n  loadUsers() {\n    this.store.dispatch(new UserLoadAction({\n      filter: this.filter.toLocaleLowerCase(),\n      pageIndex: this.paginator.pageIndex,\n      pageSize: this.paginator.pageSize //  sortDirection: this.sort.direction,\n      // sortField: this.sort.active\n\n    }));\n  }\n\n  initializeData(users) {\n    this.dataSource = new MatTableDataSource(users.length ? users : this.noData);\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n\n  retry() {\n    this.loadUsers();\n  }\n\n  addData(users) {\n    const randomElementIndex = Math.floor(Math.random() * users.length);\n    this.dataSource.push(users[randomElementIndex]);\n    this.table.renderRows();\n  }\n\n  removeData() {\n    this.dataSource.pop();\n    this.table.renderRows();\n  }\n\n}\n\nUserTableComponent.ɵfac = function UserTableComponent_Factory(t) {\n  return new (t || UserTableComponent)(i0.ɵɵdirectiveInject(i1.Store));\n};\n\nUserTableComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: UserTableComponent,\n  selectors: [[\"app-user-table\"]],\n  viewQuery: function UserTableComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(MatSort, 5);\n      i0.ɵɵviewQuery(MatPaginator, 5);\n      i0.ɵɵviewQuery(MatTable, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.table = _t.first);\n    }\n  },\n  decls: 26,\n  vars: 11,\n  consts: [[1, \"wrapper\"], [1, \"\"], [1, \"demo-button-container\"], [\"mat-raised-button\", \"\", 1, \"demo-button\", 3, \"click\"], [\"mat-raised-button\", \"\", 1, \"demo-button\", 3, \"disabled\", \"click\"], [1, \"dc-h3\", \"header\"], [\"appearance\", \"standard\"], [\"matInput\", \"\", \"placeholder\", \"Type to search\", 3, \"keyup\"], [\"input\", \"\"], [\"mat-table\", \"\", \"matSort\", \"\", 3, \"dataSource\"], [3, \"matColumnDef\", 4, \"ngFor\", \"ngForOf\"], [\"matColumnDef\", \"noData\"], [\"mat-cell\", \"\", \"class\", \"dc-label no-data-cell\", 4, \"matCellDef\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [4, \"ngIf\"], [\"aria-label\", \"Select page\", \"showFirstLastButtons\", \"\", 3, \"length\", \"pageSize\", \"pageSizeOptions\"], [\"paginator\", \"\"], [3, \"matColumnDef\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [\"mat-cell\", \"\", 1, \"dc-label\", \"no-data-cell\"], [1, \"dc-content\"], [1, \"dc-label\"], [1, \"retry\", 3, \"click\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\", \"class\", \"user-row\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"mat-row\", \"\", 1, \"user-row\"], [\"mat-row\", \"\", \"class\", \"no-data-row\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"mat-row\", \"\", 1, \"no-data-row\"]],\n  template: function UserTableComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"mat-card\", 1);\n      i0.ɵɵelementStart(2, \"h2\");\n      i0.ɵɵtext(3, \"User Management Pagination\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 2);\n      i0.ɵɵelementStart(5, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function UserTableComponent_Template_button_click_5_listener() {\n        return ctx.addData();\n      });\n      i0.ɵɵtext(6, \" Add data \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function UserTableComponent_Template_button_click_7_listener() {\n        return ctx.removeData();\n      });\n      i0.ɵɵtext(8, \" Remove data \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 5);\n      i0.ɵɵtext(10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"mat-form-field\", 6);\n      i0.ɵɵelementStart(12, \"mat-label\");\n      i0.ɵɵtext(13, \"Filter\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"input\", 7, 8);\n      i0.ɵɵlistener(\"keyup\", function UserTableComponent_Template_input_keyup_14_listener($event) {\n        return ctx.filterSubject.next($event.target.value);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"div\", 1);\n      i0.ɵɵelementStart(17, \"table\", 9);\n      i0.ɵɵtemplate(18, UserTableComponent_ng_container_18_Template, 3, 1, \"ng-container\", 10);\n      i0.ɵɵelementContainerStart(19, 11);\n      i0.ɵɵtemplate(20, UserTableComponent_td_20_Template, 6, 8, \"td\", 12);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵtemplate(21, UserTableComponent_tr_21_Template, 1, 0, \"tr\", 13);\n      i0.ɵɵtemplate(22, UserTableComponent_ng_container_22_Template, 2, 1, \"ng-container\", 14);\n      i0.ɵɵtemplate(23, UserTableComponent_ng_container_23_Template, 2, 2, \"ng-container\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(24, \"mat-paginator\", 15, 16);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"disabled\", !ctx.dataSource.length);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\"Users (\", ctx.userTotal, \")\");\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.displayedColumns);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.userTotal && !ctx.loading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.userTotal || ctx.loading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"length\", ctx.userTotal)(\"pageSize\", 10)(\"pageSizeOptions\", i0.ɵɵpureFunction0(10, _c1));\n    }\n  },\n  directives: [i2.MatCard, i3.MatFormField, i3.MatLabel, i4.MatInput, i5.MatTable, i6.NgForOf, i5.MatColumnDef, i5.MatCellDef, i5.MatHeaderRowDef, i6.NgIf, i7.MatPaginator, i5.MatHeaderCellDef, i5.MatHeaderCell, i5.MatCell, i5.MatHeaderRow, i5.MatRowDef, i5.MatRow],\n  pipes: [i6.AsyncPipe],\n  styles: [\".card[_ngcontent-%COMP%] {\\n  margin-top: 25px;\\n  width: 75%;\\n}\\n\\ntable[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n\\n.mat-form-field[_ngcontent-%COMP%] {\\n  font-size: 12px;\\n  width: 100%;\\n}\\n\\ntd[_ngcontent-%COMP%], th[_ngcontent-%COMP%] {\\n  width: 25%;\\n}\\n\\n.wrapper[_ngcontent-%COMP%] {\\n  font-size: 13px !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXItdGFibGUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGdCQUFnQjtFQUNoQixVQUFVO0FBQ1o7O0FBRUE7RUFDRSxXQUFXO0FBQ2I7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsV0FBVztBQUNiOztBQUVBOztFQUVFLFVBQVU7QUFDWjs7QUFFQTtFQUNFLDBCQUEwQjtBQUM1QiIsImZpbGUiOiJ1c2VyLXRhYmxlLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY2FyZCB7XG4gIG1hcmdpbi10b3A6IDI1cHg7XG4gIHdpZHRoOiA3NSU7XG59XG5cbnRhYmxlIHtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5tYXQtZm9ybS1maWVsZCB7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbnRkLFxudGgge1xuICB3aWR0aDogMjUlO1xufVxuXG4ud3JhcHBlciB7XG4gIGZvbnQtc2l6ZTogMTNweCAhaW1wb3J0YW50O1xufVxuIl19 */\"]\n});","map":{"version":3,"sources":["/Users/sandeepkv/Desktop/users-datatable/user-management-demo/src/app/user-table/user-table.component.ts","/Users/sandeepkv/Desktop/users-datatable/user-management-demo/src/app/user-table/user-table.component.html"],"names":[],"mappings":"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","sourcesContent":["import {\n  AfterViewInit,\n  Component, OnDestroy, OnInit, ViewChild\n} from '@angular/core';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MatSort, Sort } from '@angular/material/sort';\nimport { MatTable, MatTableDataSource } from '@angular/material/table';\nimport { select, Store } from '@ngrx/store';\nimport { merge, Observable, Subject, Subscription } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, tap } from 'rxjs/operators';\nimport { UserParams } from '../models/user-params';\nimport { UserDataInterface } from '../models/user.model';\nimport { GlobalState } from '../state/global.state';\nimport { UserLoadAction } from '../state/user.actions';\nimport {\n  selectAllUser, selectUserError,\n  selectUserLoading, selectUserTotal\n} from '../state/user.selectors';\n@Component({\n  selector: 'app-user-table',\n  templateUrl: './user-table.component.html',\n  styleUrls: ['./user-table.component.css'],\n})\nexport class UserTableComponent implements OnInit, OnDestroy, AfterViewInit {\n  public displayedColumns: string[] = [\n    'Id',\n    'FullName',\n    'Country',\n    'Role',\n    'Email',\n  ];\n  public dataSource!: MatTableDataSource<UserDataInterface>;\n  public userTotal: number;\n  public noData: UserDataInterface[] = [<UserDataInterface>{}];\n  public loading: boolean;\n  public error$: Observable<boolean>;\n  public defaultSort: Sort = { active: 'role', direction: 'asc' };\n  public filterSubject = new Subject<string>();\n  private subscription: Subscription = new Subscription();\n  private filter: string = '';\n\n  @ViewChild(MatSort, { static: false }) sort: MatSort;\n  @ViewChild(MatPaginator, { static: false }) paginator: MatPaginator;\n  @ViewChild(MatTable) table: MatTable<UserDataInterface>;\n\n  constructor(public store: Store<GlobalState>) {}\n  public ngOnInit(): void {\n    this.store\n      .pipe(select(selectAllUser))\n      .subscribe((users) => this.initializeData(users));\n    this.store\n      .pipe(select(selectUserTotal))\n      .subscribe((total) => (this.userTotal = total));\n    this.subscription.add(\n      this.store.pipe(select(selectUserLoading)).subscribe((loading) => {\n        if (loading) {\n          this.dataSource = new MatTableDataSource(this.noData);\n        }\n        this.loading = loading;\n      })\n    );\n    this.error$ = this.store.pipe(select(selectUserError));\n  }\n\n  public ngAfterViewInit(): void {\n    this.loadUsers();\n    let filter$ = this.filterSubject.pipe(\n      debounceTime(150),\n      distinctUntilChanged(),\n      tap((value: string) => {\n        this.paginator.pageIndex = 0;\n        this.filter = value;\n      })\n    );\n\n    // let sort$ = this.sort.sortChange.pipe(tap(() => this.paginator.pageIndex = 0));\n\n    this.subscription.add(\n      merge(filter$, this.paginator.page)\n        .pipe(tap(() => this.loadUsers()))\n        .subscribe()\n    );\n  }\n\n  private loadUsers(): void {\n    this.store.dispatch(\n      new UserLoadAction(<UserParams>{\n        filter: this.filter.toLocaleLowerCase(),\n        pageIndex: this.paginator.pageIndex,\n        pageSize: this.paginator.pageSize,\n        //  sortDirection: this.sort.direction,\n        // sortField: this.sort.active\n      })\n    );\n  }\n\n  private initializeData(users: UserDataInterface[]): void {\n    this.dataSource = new MatTableDataSource(\n      users.length ? users : this.noData\n    );\n  }\n\n  public ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n\n  public retry(): void {\n    this.loadUsers();\n  }\n\n  addData(users: UserDataInterface[]) {\n    const randomElementIndex = Math.floor(Math.random() * users.length);\n    this.dataSource.push(users[randomElementIndex]);\n    this.table.renderRows();\n  }\n\n  removeData() {\n    this.dataSource.pop();\n    this.table.renderRows();\n  }\n}\n","<div class=\"wrapper\">\n  <mat-card class=\"\"\n    ><h2>User Management Pagination</h2>\n    <div class=\"demo-button-container\">\n      <button mat-raised-button (click)=\"addData()\" class=\"demo-button\">\n        Add data\n      </button>\n      <button\n        mat-raised-button\n        (click)=\"removeData()\"\n        [disabled]=\"!dataSource.length\"\n        class=\"demo-button\"\n      >\n        Remove data\n      </button>\n    </div>\n    <div class=\"dc-h3 header\">Users ({{ userTotal }})</div>\n    <mat-form-field appearance=\"standard\">\n      <mat-label>Filter</mat-label>\n      <input\n        matInput\n        (keyup)=\"filterSubject.next($event.target.value)\"\n        placeholder=\"Type to search\"\n        #input\n      />\n    </mat-form-field>\n    <div class=\"\">\n      <table mat-table [dataSource]=\"dataSource\" matSort>\n        <ng-container\n          *ngFor=\"let columnName of displayedColumns\"\n          [matColumnDef]=\"columnName\"\n        >\n          <th mat-header-cell *matHeaderCellDef>{{ columnName }}</th>\n          <td mat-cell *matCellDef=\"let row\">{{ row[columnName] }}</td>\n        </ng-container>\n\n        <ng-container matColumnDef=\"noData\">\n          <td\n            mat-cell\n            class=\"dc-label no-data-cell\"\n            *matCellDef=\"let element\"\n            [attr.colspan]=\"displayedColumns.length\"\n          >\n            <ng-container *ngIf=\"!(error$ | async) && !loading\">\n              <span class=\"dc-content\">No Users</span>\n            </ng-container>\n            <ng-container *ngIf=\"(error$ | async) && !loading\">\n              <span class=\"dc-label\">System Failure</span>\n              <span class=\"dc-content\">Error</span>\n              <span class=\"retry\" (click)=\"retry()\">Retry</span>\n            </ng-container>\n            <ng-container *ngIf=\"loading\">\n              <span class=\"dc-label\">Retrieving data...</span>\n            </ng-container>\n          </td>\n        </ng-container>\n\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\n        <ng-container *ngIf=\"userTotal && !loading\">\n          <tr\n            mat-row\n            *matRowDef=\"let row; columns: displayedColumns\"\n            class=\"user-row\"\n          ></tr>\n        </ng-container>\n        <ng-container *ngIf=\"!userTotal || loading\">\n          <tr\n            mat-row\n            *matRowDef=\"let row; columns: ['noData']\"\n            class=\"no-data-row\"\n          ></tr>\n        </ng-container>\n      </table>\n\n      <mat-paginator\n        #paginator\n        [length]=\"userTotal\"\n        [pageSize]=\"10\"\n        [pageSizeOptions]=\"[5, 10, 25, 100]\"\n        aria-label=\"Select page\"\n        showFirstLastButtons\n      >\n      </mat-paginator>\n    </div>\n  </mat-card>\n</div>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}